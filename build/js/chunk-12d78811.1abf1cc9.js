(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12d78811"],{"20ca":function(e,t,n){"use strict";function a(e,t,n){var a;return function(){var i=this,c=arguments,o=function(){a=null,n||e.apply(i,c)},r=n&&!a;clearTimeout(a),a=setTimeout(o,t),r&&e.apply(i,c)}}n.d(t,"a",(function(){return a}))},"25f0":function(e,t,n){"use strict";var a=n("6eeb"),i=n("825a"),c=n("d039"),o=n("ad6d"),r="toString",s=RegExp.prototype,u=s[r],l=c((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),d=u.name!=r;(l||d)&&a(RegExp.prototype,r,(function(){var e=i(this),t=String(e.source),n=e.flags,a=String(void 0===n&&e instanceof RegExp&&!("flags"in s)?o.call(e):n);return"/"+t+"/"+a}),{unsafe:!0})},"5f1f":function(e,t,n){},a409:function(e,t,n){"use strict";n("5f1f")},cde5:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"g-table"},[n("loading",{attrs:{active:e.loading,"can-cancel":!1,"is-full-page":!1},on:{"update:active":function(t){e.loading=t}}}),n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{label:"ID",prop:"id"}}),n("el-table-column",{attrs:{label:"Name"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.new||e.editingDeviceId===t.row.id?t.row.new||e.editingDeviceId===t.row.id?n("div",{staticClass:"g-table__cell"},[n("custom-input",{model:{value:e.newDeviceName,callback:function(t){e.newDeviceName=t},expression:"newDeviceName"}})],1):e._e():n("span",[e._v(e._s(t.row.name))])]}}])}),n("el-table-column",{attrs:{label:"Actions"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"g-table__actions"},[t.row.new?[n("button",{staticClass:"g-button g-table__actions-item",on:{click:e.onCreate}},[n("font-awesome-icon",{attrs:{icon:"save"}})],1),n("button",{staticClass:"g-button g-button--danger g-table__actions-item",on:{click:e.onRemoveLocal}},[n("font-awesome-icon",{attrs:{icon:"trash"}})],1)]:[n("button",{staticClass:"g-button g-button--edit g-table__actions-item",on:{click:function(n){return e.onEdit(t.row)}}},[n("font-awesome-icon",{attrs:{icon:"edit"}})],1),n("button",{staticClass:"g-button g-button--danger g-table__actions-item",on:{click:function(n){return e.onRemove(t.row.id)}}},[n("font-awesome-icon",{attrs:{icon:"trash"}})],1)]],2)]}}])})],1),n("pagination",{attrs:{"total-elems":e.total,"per-page":e.limit},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)},i=[],c=n("5530"),o=n("1da1"),r=(n("96cf"),n("d3b7"),n("3ca3"),n("ddb0"),n("25f0"),n("b0c0"),n("2f62")),s=n("20ca"),u={name:"Table",components:{Pagination:function(){return n.e("chunk-db8b4498").then(n.bind(null,"1799"))},CustomInput:function(){return n.e("chunk-7fa08c76").then(n.bind(null,"ffcc"))}},props:{creatingNew:{type:Boolean,default:!1}},data:function(){return{wait:!1,loading:!1,page:1,newDeviceName:"",editingDeviceId:null}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.fetchDevices(e.page);case 3:e.loading=!1;case 4:case"end":return t.stop()}}),t)})))()},watch:{page:function(){this.debounceFetch()},creatingNew:function(){this.creatingNew&&(this.newDeviceName="",this.editingDeviceId=null)}},computed:Object(c["a"])(Object(c["a"])({},Object(r["d"])("devices",["devices","limit"])),{},{tableData:function(){var e,t,n=JSON.parse(JSON.stringify(null!==(e=null===(t=this.devices)||void 0===t?void 0:t.items)&&void 0!==e?e:[]));return this.creatingNew&&n.unshift({new:!0,id:"NEW",name:""}),n},total:function(){var e,t,n;return parseInt(null!==(e=null===(t=this.devices)||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.totalItems.toString())&&void 0!==e?e:"0")}}),methods:Object(c["a"])(Object(c["a"])({},Object(r["b"])("devices",["fetchDevices","removeDevice","createDevice","updateDevice"])),{},{debounceFetch:Object(s["a"])(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.fetchDevices(this.page);case 3:this.loading=!1;case 4:case"end":return e.stop()}}),e,this)}))),200),onRemove:function(e){var t=this;this.$confirm("This will permanently delete the device. Continue?","Confirmation",{confirmButtonText:"Remove",cancelButtonText:"Cancel",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.loading){n.next=5;break}return t.loading=!0,n.next=4,t.removeDevice(e).then((function(){t.$message({type:"success",message:"Device with id ".concat(e," was removed")})})).catch((function(e){console.error(e),t.$message({type:"error",message:e.response.data.message})}));case 4:t.loading=!1;case 5:case"end":return n.stop()}}),n)})))).catch((function(){}))},onCreate:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.wait){t.next=5;break}return e.wait=!0,t.next=4,e.createDevice({name:e.newDeviceName}).then((function(){e.$emit("set-creating-new",!1),1!==e.page?e.page=1:e.fetchDevices(e.page)})).catch((function(t){e.$toasted.error(t.response.data.error||t.response.data.message)}));case 4:e.wait=!1;case 5:case"end":return t.stop()}}),t)})))()},onEdit:function(e){var t=this;this.$emit("set-creating-new",!1),this.$nextTick(Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.editingDeviceId){n.next=13;break}if(t.editingDeviceId=t.editingDeviceId===e.id?null:e.id,!t.editingDeviceId){n.next=6;break}t.newDeviceName=e.name,n.next=11;break;case 6:if(t.newDeviceName===e.name||t.wait){n.next=11;break}return t.wait=!0,n.next=10,t.updateDevice({id:e.id,name:t.newDeviceName}).then((function(){t.$toasted.success("The device was successfully updated")})).catch((function(e){var n,a,i,c;t.$toasted.error((null===e||void 0===e||null===(n=e.response)||void 0===n||null===(a=n.data)||void 0===a?void 0:a.error)||(null===e||void 0===e||null===(i=e.response)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.message)||e)}));case 10:t.wait=!1;case 11:n.next=15;break;case 13:t.editingDeviceId=e.id,t.newDeviceName=e.name;case 15:case"end":return n.stop()}}),n)}))))},onRemoveLocal:function(){this.$emit("set-creating-new",!1),this.newDeviceName=""}})},l=u,d=(n("a409"),n("2877")),f=Object(d["a"])(l,a,i,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-12d78811.1abf1cc9.js.map
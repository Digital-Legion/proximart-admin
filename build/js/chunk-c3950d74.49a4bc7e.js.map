{"version":3,"sources":["webpack:///./src/utils/debounce.js","webpack:///./src/pages/colors/add-edit.vue?bd9e","webpack:///src/pages/colors/add-edit.vue","webpack:///./src/pages/colors/add-edit.vue?2a09","webpack:///./src/pages/colors/add-edit.vue?7cb6","webpack:///./src/pages/colors/add-edit.vue?57d4","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["debounce","func","wait","immediate","timeout","context","this","args","arguments","later","apply","callNow","clearTimeout","setTimeout","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","loading","on","$event","pageTitle","submit","_v","_s","timeLeftToUpdate","_e","activeLang","filteredLangs","setActiveLang","model","value","callback","$$v","name","expression","nameAz","color","staticRenderFns","components","PageHeader","PageTabs","PageBox","CustomInput","CustomColorPicker","data","dataUpdated","timer","dontSendData","computed","colorId","$route","params","id","defaultLangError","azLangError","langs","map","methods","dataUpdate","startTimer","onDataUpdate","onCategoriesSelect","categories","clearInterval","setInterval","beforeRouteLeave","next","component","$","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","target","proto","forced","callbackfn","length","undefined"],"mappings":"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","file":"js/chunk-c3950d74.49a4bc7e.js","sourcesContent":["export function debounce (func, wait, immediate) {\n  let timeout\n  return function () {\n    const context = this; const args = arguments\n    const later = function () {\n      timeout = null\n      if (!immediate) func.apply(context, args)\n    }\n    const callNow = immediate && !timeout\n    clearTimeout(timeout)\n    timeout = setTimeout(later, wait)\n    if (callNow) func.apply(context, args)\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"add-edit-page\"},[_c('loading',{attrs:{\"active\":_vm.loading,\"can-cancel\":false,\"is-full-page\":true},on:{\"update:active\":function($event){_vm.loading=$event}}}),_c('page-header',{attrs:{\"title\":_vm.pageTitle}},[_c('button',{staticClass:\"g-button\",attrs:{\"disabled\":_vm.wait},on:{\"click\":function($event){return _vm.submit(true)}}},[_c('font-awesome-icon',{attrs:{\"icon\":\"save\"}}),_c('span',[_vm._v(\"Save\")]),(_vm.dataUpdated)?_c('span',[_vm._v(\" (autosave in \"+_vm._s(_vm.timeLeftToUpdate)+\")\")]):_vm._e()],1),_c('router-link',{staticClass:\"g-button g-button--danger\",attrs:{\"to\":\"/colors\"}},[_c('font-awesome-icon',{attrs:{\"icon\":\"ban\"}}),_c('span',[_vm._v(\"Cancel\")])],1)],1),_c('page-tabs',{attrs:{\"value\":_vm.activeLang,\"options\":_vm.filteredLangs},on:{\"input\":_vm.setActiveLang}}),_c('page-box',{attrs:{\"double\":true}},[_c('div',{staticClass:\"add-edit-page__left\"},[(_vm.activeLang === 'ru')?_c('custom-input',{staticClass:\"mb-20\",attrs:{\"placeholder\":\"Enter name\",\"label\":\"Name\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}}):(_vm.activeLang === 'az')?_c('custom-input',{staticClass:\"mb-20\",attrs:{\"placeholder\":\"Enter name\",\"label\":\"Name\"},model:{value:(_vm.nameAz),callback:function ($$v) {_vm.nameAz=$$v},expression:\"nameAz\"}}):_vm._e()],1),_c('div',{staticClass:\"add-edit-page__right\"},[_c('custom-color-picker',{attrs:{\"label\":\"Color (all languages)\"},model:{value:(_vm.color),callback:function ($$v) {_vm.color=$$v},expression:\"color\"}})],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"add-edit-page\">\n    <loading\n      :active.sync=\"loading\"\n      :can-cancel=\"false\"\n      :is-full-page=\"true\"\n    />\n\n    <page-header :title=\"pageTitle\">\n      <button class=\"g-button\" @click=\"submit(true)\" :disabled=\"wait\">\n        <font-awesome-icon icon=\"save\" />\n        <span>Save</span>\n        <span v-if=\"dataUpdated\"> (autosave in {{ timeLeftToUpdate }})</span>\n      </button>\n      <router-link class=\"g-button g-button--danger\" to=\"/colors\">\n        <font-awesome-icon icon=\"ban\" />\n        <span>Cancel</span>\n      </router-link>\n    </page-header>\n    <page-tabs @input=\"setActiveLang\" :value=\"activeLang\" :options=\"filteredLangs\" />\n    <page-box :double=\"true\">\n      <div class=\"add-edit-page__left\">\n        <custom-input\n          v-model=\"name\"\n          placeholder=\"Enter name\"\n          class=\"mb-20\"\n          label=\"Name\"\n          v-if=\"activeLang === 'ru'\"\n        />\n        <custom-input\n          v-model=\"nameAz\"\n          placeholder=\"Enter name\"\n          class=\"mb-20\"\n          label=\"Name\"\n          v-else-if=\"activeLang === 'az'\"\n        />\n      </div>\n      <div class=\"add-edit-page__right\">\n        <custom-color-picker\n          v-model=\"color\"\n          label=\"Color (all languages)\"\n        />\n      </div>\n    </page-box>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapActions, mapMutations } from 'vuex'\nimport { debounce } from '@/utils/debounce'\n\nexport default {\n  name: 'ColorsAddEdit',\n\n  components: {\n    PageHeader: () => import('@/components/PageHeader'),\n    PageTabs: () => import('@/components/PageTabs'),\n    PageBox: () => import('@/components/PageBox'),\n    CustomInput: () => import('@/components/CustomInput'),\n    CustomColorPicker: () => import('@/components/CustomColorPicker')\n  },\n\n  data () {\n    return {\n      name: '',\n      nameAz: '',\n      color: '',\n\n      wait: false,\n      loading: false,\n      dataUpdated: false,\n      timer: null,\n      timeLeftToUpdate: 0,\n      dontSendData: false\n    }\n  },\n\n  async mounted () {\n    if (this.colorId) {\n      this.loading = true\n      await this.fetchColor(this.colorId)\n        .then(({ data }) => {\n          this.name = data.name\n          this.nameAz = data.name__az\n          this.color = data.hex ? `#${data.hex}` : null\n        })\n        .catch(e => {\n          console.error(e)\n          this.$toasted.error(e.response.data.message)\n          this.$router.push('/brands')\n        })\n      this.loading = false\n    }\n\n    // watching variables\n    this.$watch(vm => [\n      vm.name,\n      vm.nameAz,\n      vm.color\n    ], () => {\n      if (this.colorId)\n        this.dataUpdate()\n    })\n  },\n\n  computed: {\n    ...mapState(['activeLang', 'langs']),\n\n    pageTitle () {\n      return this.colorId ? `Editing color ${this.name ?? 'with id ' + this.colorId}` : 'Creating a new color'\n    },\n\n    colorId () {\n      return this.$route.params.id\n    },\n\n    defaultLangError () {\n      return false\n    },\n\n    azLangError () {\n      return false\n    },\n\n    filteredLangs () {\n      return this.langs.map(lang => ({\n        ...lang,\n        error: lang.title === 'ru' ? this.defaultLangError : (lang.title === 'az' ? this.azLangError : false)\n      }))\n    }\n  },\n\n  methods: {\n    ...mapMutations(['setActiveLang']),\n    ...mapActions('colors', ['fetchColor', 'createColor', 'updateColor']),\n\n    dataUpdate () {\n      this.dataUpdated = true\n      this.startTimer()\n      this.onDataUpdate()\n    },\n\n    onCategoriesSelect (categories) {\n      this.categories = categories\n    },\n\n    onDataUpdate: (debounce(function () {\n      this.dataUpdated = false\n      if (this.timer === null)\n        this.submit()\n    }, (10 + 1) * 1000)), // update data after N seconds after it's been changed with debounce\n\n    startTimer () {\n      clearInterval(this.timer)\n      this.timeLeftToUpdate = 10\n      this.timer = setInterval(() => {\n        this.timeLeftToUpdate--\n        if (this.timeLeftToUpdate <= 0) {\n          clearInterval(this.timer)\n          this.timer = null\n        }\n      }, 1000)\n    },\n\n    async submit (redirect) {\n      if (!this.wait) {\n        this.wait = true\n        const data = {\n          name: this.name,\n          name__az: this.nameAz,\n          hex: this.color ? this.color.slice(1) : ''\n        }\n\n        if (!this.colorId) {\n          await this.createColor(data)\n            .then(() => {\n              if (redirect)\n                this.$router.push('/colors')\n              this.$toasted.success('The color was successfully created')\n            })\n            .catch(e => {\n              console.error(e)\n              this.$toasted.error(e.response.data.message)\n            })\n        } else {\n          data.id = this.colorId\n\n          await this.updateColor(data)\n            .then(() => {\n              this.$toasted.success('The color was successfully updated')\n            })\n            .catch(e => {\n              console.error(e)\n              this.$toasted.error(e.response.data.message)\n            })\n        }\n\n        this.dataUpdated = false\n        clearTimeout(this.timer)\n        this.wait = false\n      }\n    }\n  },\n\n  beforeRouteLeave (to, from, next) {\n    this.dontSendData = true\n    clearTimeout(this.timer)\n    this.dataUpdated = false\n    next()\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import '@/assets/styles/pages/add-edit.scss';\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/src/index.js!./add-edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/src/index.js!./add-edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./add-edit.vue?vue&type=template&id=ae7fbb0e&\"\nimport script from \"./add-edit.vue?vue&type=script&lang=js&\"\nexport * from \"./add-edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./add-edit.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../../node_modules/vue-svg-inline-loader/src/index.js!./add-edit.vue?vue&type=style&index=0&lang=scss&\"","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}
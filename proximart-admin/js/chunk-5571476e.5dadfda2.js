(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5571476e"],{2167:function(e,n,a){"use strict";a.r(n);var t=function(){var e=this,n=e.$createElement,a=e._self._c||n;return a("div",{staticClass:"banner-box"},[a("page-tabs",{attrs:{value:e.activeLang,options:e.langs},on:{input:e.setActiveLang}}),a("page-box",{attrs:{double:!0},scopedSlots:e._u([{key:"outer-content",fn:function(){return[a("loading",{attrs:{active:e.loading,"can-cancel":!1,"is-full-page":!1},on:{"update:active":function(n){e.loading=n}}}),a("page-header",{staticClass:"mb-20 w-100",scopedSlots:e._u([{key:"content",fn:function(){return[a("h2",{staticClass:"g-title"},[e._v("Banner")])]},proxy:!0}])},[a("button",{staticClass:"g-button",class:{"g-button--blinking":e.dataUpdated},attrs:{disabled:e.loading||!e.dataUpdated},on:{click:e.onSave}},[a("font-awesome-icon",{attrs:{icon:"save"}}),a("span",[e._v("Save")])],1),null!==e.bannerId?a("button",{staticClass:"g-button g-button--danger",attrs:{disabled:e.loading},on:{click:e.onRemove}},[a("font-awesome-icon",{attrs:{icon:"trash"}}),a("span",[e._v("Remove")])],1):e._e()])]},proxy:!0}])},[a("div",{staticClass:"add-edit-page__left"},["ru"===e.activeLang?a("custom-input",{class:["small"===e.bannerType.id?"mb-104":"mb-20"],attrs:{label:"Name",placeholder:"Enter name"},model:{value:e.name,callback:function(n){e.name=n},expression:"name"}}):"az"===e.activeLang?a("custom-input",{class:["small"===e.bannerType.id?"mb-104":"mb-20"],attrs:{label:"Name",placeholder:"Enter name"},model:{value:e.nameAz,callback:function(n){e.nameAz=n},expression:"nameAz"}}):e._e(),a("drop-image",{staticClass:"add-edit-page__drop-image",attrs:{label:"Desktop image (all languages)","img-src":e.deskImageUrl},on:{set:function(n){e.deskImageFile=n.file,e.deskImageUrl=n.src}}})],1),a("div",{staticClass:"add-edit-page__right"},[a("custom-select",{staticClass:"mb-20",attrs:{value:e.bannerType?e.bannerType.id:null,options:Object.values(e.bannerTypes).filter((function(e){return"all"!==e.id})),label:"Banner type",placeholder:"Select the banner type"},on:{"set-value":function(n){e.bannerType=e.bannerTypes[n]}}}),"small"===e.bannerType.id?a("custom-select",{staticClass:"mb-20",attrs:{value:e.bannerColor?e.bannerColor.id:null,options:Object.values(e.bannerColors),label:"Banner color",placeholder:"Select the banner color"},on:{"set-value":function(n){e.bannerColor=e.bannerColors[n]}}}):e._e(),a("drop-image",{staticClass:"add-edit-page__drop-image",attrs:{label:"Mobile image (all languages)","img-src":e.mobImageUrl},on:{set:function(n){e.mobImageFile=n.file,e.mobImageUrl=n.src}}})],1)])],1)},r=[],i=a("1da1"),s=a("5530"),l=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("a9e3"),a("b0c0"),a("c96a"),a("2f62")),o={name:"BannerBox",components:{PageTabs:function(){return a.e("chunk-e85c4fcc").then(a.bind(null,"f83a"))},PageBox:function(){return a.e("chunk-6977128a").then(a.bind(null,"e235"))},PageHeader:function(){return a.e("chunk-aefa6f68").then(a.bind(null,"36ad"))},CustomSelect:function(){return a.e("chunk-439eeb4f").then(a.bind(null,"b8bb"))},CustomInput:function(){return a.e("chunk-7fa08c76").then(a.bind(null,"ffcc"))},DropImage:function(){return Promise.resolve().then(a.bind(null,"244d"))}},props:{loading:{type:Boolean,default:!1},initialData:{default:null},dataUpdated:{type:Boolean,default:!1},productId:{type:[Number,String],default:null}},data:function(){return{bannerExists:!1,justSetInitialData:!1,initialDataSet:!1,bannerId:null,name:"",nameAz:"",deskImageUrl:null,deskImageFile:null,mobImageUrl:null,mobImageFile:null,bannerType:this.$store.state.banners.bannerTypes.large,bannerColor:this.$store.state.banners.bannerColors.black}},mounted:function(){var e=this;this.$watch((function(e){return[e.name,e.nameAz,e.bannerType,e.deskImageUrl,e.deskImageFile,e.mobImageUrl,e.mobImageFile,e.bannerColor]}),(function(){e.justSetInitialData?(e.justSetInitialData=!1,e.$emit("set-updated",!1)):e.$emit("set-updated",!0)}))},watch:{initialData:function(){this.setInitialData()}},computed:Object(s["a"])(Object(s["a"])({},Object(l["d"])(["activeLang","defaultActiveLang","langs"])),Object(l["d"])("banners",["bannerTypes","bannerColors"])),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(l["c"])(["setActiveLang"])),Object(l["b"])("banners",["createBanner","updateBanner","removeBanner"])),{},{setInitialData:function(){var e,n;this.initialData&&!this.initialDataSet&&(this.bannerId=this.initialData.id||null,this.name=this.initialData.name||"",this.nameAz=this.initialData.name__az||"",this.deskImageUrl=(null===(e=this.initialData.desktop)||void 0===e?void 0:e.url)||null,this.mobImageUrl=(null===(n=this.initialData.mobile)||void 0===n?void 0:n.url)||null,this.bannerType=this.initialData.big_banner?this.$store.state.banners.bannerTypes.large:this.$store.state.banners.bannerTypes.small,this.bannerColor="black"===this.initialData.hex?this.$store.state.banners.bannerColors.black:this.$store.state.banners.bannerColors.white,this.justSetInitialData=!0,this.initialDataSet=!0)},onSave:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a={name:e.name,name__az:e.nameAz,desktop:e.deskImageFile||e.deskImageUrl,mobile:e.mobImageFile||e.mobImageUrl,big_banner:e.bannerType.value,product:e.productId},"small"===e.bannerType.id&&(a.hex=e.bannerColor.value),e.$emit("set-loading",!0),!e.bannerId){n.next=9;break}return a.id=e.bannerId,n.next=7,e.updateBanner(a).then((function(){e.$toasted.success("The banner with id ".concat(e.bannerId," was saved")),e.$emit("set-updated",!1)})).catch((function(n){console.error(n),e.$toasted.error(n.response.data.message)}));case 7:n.next=11;break;case 9:return n.next=11,e.createBanner(a).then((function(n){e.bannerId=n.data.id,e.$toasted.success("The banner with id ".concat(e.bannerId," was saved")),e.$emit("set-updated",!1)})).catch((function(n){console.error(n),e.$toasted.error(n.response.data.message)}));case 11:e.$emit("set-loading",!1);case 12:case"end":return n.stop()}}),n)})))()},onRemove:function(){var e=this,n=this.bannerId;this.$confirm("This will permanently delete the banner. Continue?","Confirmation",{confirmButtonText:"Remove",cancelButtonText:"Cancel",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.$emit("set-loading",!0),a.next=3,e.removeBanner({id:n,removeInBanners:!1}).then((function(){e.$emit("set-banner",null),e.bannerId=null,e.name="",e.nameAz="",e.deskImageFile=null,e.deskImageUrl=null,e.mobImageFile=null,e.mobImageUrl=null,e.justSetInitialData=!0,e.$message({type:"success",message:"Banner with id ".concat(n," was removed")})})).catch((function(n){console.error(n),e.$message({type:"error",message:n.response.data.message})}));case 3:e.$emit("set-loading",!1),e.$emit("set-loading",!1);case 5:case"end":return a.stop()}}),a)})))).catch((function(){}))}})},c=o,u=a("2877"),d=Object(u["a"])(c,t,r,!1,null,null,null);n["default"]=d.exports},"857a":function(e,n,a){var t=a("1d80"),r=/"/g;e.exports=function(e,n,a,i){var s=String(t(e)),l="<"+n;return""!==a&&(l+=" "+a+'="'+String(i).replace(r,"&quot;")+'"'),l+">"+s+"</"+n+">"}},af03:function(e,n,a){var t=a("d039");e.exports=function(e){return t((function(){var n=""[e]('"');return n!==n.toLowerCase()||n.split('"').length>3}))}},c96a:function(e,n,a){"use strict";var t=a("23e7"),r=a("857a"),i=a("af03");t({target:"String",proto:!0,forced:i("small")},{small:function(){return r(this,"small","","")}})}}]);
//# sourceMappingURL=chunk-5571476e.5dadfda2.js.map
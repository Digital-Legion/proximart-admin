(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c3950d74"],{"20ca":function(t,e,a){"use strict";function n(t,e,a){var n;return function(){var r=this,o=arguments,c=function(){n=null,a||t.apply(r,o)},i=a&&!n;clearTimeout(n),n=setTimeout(c,e),i&&t.apply(r,o)}}a.d(e,"a",(function(){return n}))},"237f":function(t,e,a){},"6c99":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-edit-page"},[a("loading",{attrs:{active:t.loading,"can-cancel":!1,"is-full-page":!0},on:{"update:active":function(e){t.loading=e}}}),a("page-header",{attrs:{title:t.pageTitle}},[a("button",{staticClass:"g-button",attrs:{disabled:t.wait},on:{click:function(e){return t.submit(!0)}}},[a("font-awesome-icon",{attrs:{icon:"save"}}),a("span",[t._v("Save")]),t.dataUpdated?a("span",[t._v(" (autosave in "+t._s(t.timeLeftToUpdate)+")")]):t._e()],1),a("router-link",{staticClass:"g-button g-button--danger",attrs:{to:"/colors"}},[a("font-awesome-icon",{attrs:{icon:"ban"}}),a("span",[t._v("Cancel")])],1)],1),a("page-tabs",{attrs:{value:t.activeLang,options:t.filteredLangs},on:{input:t.setActiveLang}}),a("page-box",{attrs:{double:!0}},[a("div",{staticClass:"add-edit-page__left"},["ru"===t.activeLang?a("custom-input",{staticClass:"mb-20",attrs:{placeholder:"Enter name",label:"Name"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}):"az"===t.activeLang?a("custom-input",{staticClass:"mb-20",attrs:{placeholder:"Enter name",label:"Name"},model:{value:t.nameAz,callback:function(e){t.nameAz=e},expression:"nameAz"}}):t._e()],1),a("div",{staticClass:"add-edit-page__right"},[a("custom-color-picker",{attrs:{label:"Color (all languages)"},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}})],1)])],1)},r=[],o=a("5530"),c=a("1da1"),i=(a("96cf"),a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),a("d81d"),a("fb6a"),a("2f62")),s=a("20ca"),u={name:"ColorsAddEdit",components:{PageHeader:function(){return a.e("chunk-aefa6f68").then(a.bind(null,"36ad"))},PageTabs:function(){return a.e("chunk-e85c4fcc").then(a.bind(null,"f83a"))},PageBox:function(){return a.e("chunk-6977128a").then(a.bind(null,"e235"))},CustomInput:function(){return a.e("chunk-7fa08c76").then(a.bind(null,"ffcc"))},CustomColorPicker:function(){return a.e("chunk-f85c85a8").then(a.bind(null,"fd2b"))}},data:function(){return{name:"",nameAz:"",color:"",wait:!1,loading:!1,dataUpdated:!1,timer:null,timeLeftToUpdate:0,dontSendData:!1}},mounted:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.colorId){e.next=5;break}return t.loading=!0,e.next=4,t.fetchColor(t.colorId).then((function(e){var a=e.data;t.name=a.name,t.nameAz=a.name__az,t.color=a.hex?"#".concat(a.hex):null})).catch((function(e){console.error(e),t.$toasted.error(e.response.data.message),t.$router.push("/brands")}));case 4:t.loading=!1;case 5:t.$watch((function(t){return[t.name,t.nameAz,t.color]}),(function(){t.colorId&&t.dataUpdate()}));case 6:case"end":return e.stop()}}),e)})))()},computed:Object(o["a"])(Object(o["a"])({},Object(i["d"])(["activeLang","langs"])),{},{pageTitle:function(){var t;return this.colorId?"Editing color ".concat(null!==(t=this.name)&&void 0!==t?t:"with id "+this.colorId):"Creating a new color"},colorId:function(){return this.$route.params.id},defaultLangError:function(){return!1},azLangError:function(){return!1},filteredLangs:function(){var t=this;return this.langs.map((function(e){return Object(o["a"])(Object(o["a"])({},e),{},{error:"ru"===e.title?t.defaultLangError:"az"===e.title&&t.azLangError})}))}}),methods:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(i["c"])(["setActiveLang"])),Object(i["b"])("colors",["fetchColor","createColor","updateColor"])),{},{dataUpdate:function(){this.dataUpdated=!0,this.startTimer(),this.onDataUpdate()},onCategoriesSelect:function(t){this.categories=t},onDataUpdate:Object(s["a"])((function(){this.dataUpdated=!1,null===this.timer&&this.submit()}),11e3),startTimer:function(){var t=this;clearInterval(this.timer),this.timeLeftToUpdate=10,this.timer=setInterval((function(){t.timeLeftToUpdate--,t.timeLeftToUpdate<=0&&(clearInterval(t.timer),t.timer=null)}),1e3)},submit:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.wait){a.next=14;break}if(e.wait=!0,n={name:e.name,name__az:e.nameAz,hex:e.color?e.color.slice(1):""},e.colorId){a.next=8;break}return a.next=6,e.createColor(n).then((function(){t&&e.$router.push("/colors"),e.$toasted.success("The color was successfully created")})).catch((function(t){console.error(t),e.$toasted.error(t.response.data.message)}));case 6:a.next=11;break;case 8:return n.id=e.colorId,a.next=11,e.updateColor(n).then((function(){e.$toasted.success("The color was successfully updated")})).catch((function(t){console.error(t),e.$toasted.error(t.response.data.message)}));case 11:e.dataUpdated=!1,clearTimeout(e.timer),e.wait=!1;case 14:case"end":return a.stop()}}),a)})))()}}),beforeRouteLeave:function(t,e,a){this.dontSendData=!0,clearTimeout(this.timer),this.dataUpdated=!1,a()}},l=u,d=(a("c07e"),a("2877")),f=Object(d["a"])(l,n,r,!1,null,null,null);e["default"]=f.exports},c07e:function(t,e,a){"use strict";a("237f")},d81d:function(t,e,a){"use strict";var n=a("23e7"),r=a("b727").map,o=a("1dde"),c=o("map");n({target:"Array",proto:!0,forced:!c},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-c3950d74.49a4bc7e.js.map